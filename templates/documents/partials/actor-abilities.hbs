{{#each actor.abilities as |abilityGroup|}}
    {{#if abilityGroup}}
        {{#with @key as |group|}}
            {{#each abilityGroup as |ability|}}
                {{#if ability.show}}

                    <div class='ability {{group}}-ability' data-ability-type='{{group}}' data-ability-id='{{ability._id}}'>
                        <div class='ability-group-label'>{{localize (concat 'system.items.ability.types.' group '.label')}}</div>
                        <div class='ability-header'>
                            <div class='ability-name'>{{ability.name}}</div>
                            <div class='ability-cost'>{{ability.system.cost}}</div>
                            <div class='ability-edit' data-action='editAbility' data-ability-id='{{ability._id}}'>
                                <i
                                    class='fa-solid fa-pencil'
                                    data-tooltip-direction='RIGHT'
                                    data-tooltip='{{localize "system.sheets.actor.abilities.edit"}}'
                                ></i>
                            </div>
                            <div class='ability-delete' data-action='deleteAbility' data-ability-id='{{ability._id}}'>
                                <i
                                    class='fa-solid fa-trash'
                                    data-tooltip-direction='RIGHT'
                                    data-tooltip='{{localize "system.sheets.actor.abilities.delete"}}'
                                ></i>
                            </div>
                        </div>
                        <div class='property ability-keywords'>
                            <div class='label'>{{localize 'system.items.ability.FIELDS.keywords.label'}}</div>
                            <div class='value'>
                                {{#each ability.system.keywords as |keyword|}}
                                    {{#if keyword}}
                                        {{localize (concat 'system.items.ability.keywords.' keyword '.label')}}{{#unless @last}}, {{/unless}}
                                    {{/if}}
                                {{/each}}
                                {{#unless ability.system.keywords}} &mdash; {{/unless}}
                            </div>
                        </div>
                        {{#if ability.system.trigger}}
                            <div class='property ability-trigger'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.trigger.label'}}</div>
                                <div class='value'>{{ability.system.trigger}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.time}}
                            <div class='property ability-time'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.time.label'}}</div>
                                <div class='value'>{{localize (concat 'system.items.ability.times.' ability.system.time '.label')}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.distance}}
                            <div class='property ability-distance'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.distance.label'}}</div>
                                <div class='value'>{{ability.system.distance}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.target}}
                            <div class='property ability-target'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.target.label'}}</div>
                                <div class='value'>{{ability.system.target}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.effect}}
                            <div class='property ability-effect'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.effect.label'}}</div>
                                <div class='value'>{{{ability.system.enrichedEffect}}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.tiers.one}}
                            <div class='tier-one property ability-tiers'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.tiers.one.label'}}</div>
                                <div class='value'>{{ability.system.tiers.one}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.tiers.two}}
                            <div class='tier-two property ability-tiers'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.tiers.two.label'}}</div>
                                <div class='value'>{{ability.system.tiers.two}}</div>
                            </div>
                        {{/if}}
                        {{#if ability.system.tiers.three}}
                            <div class='tier-three property ability-tiers'>
                                <div class='label'>{{localize 'system.items.ability.FIELDS.tiers.three.label'}}</div>
                                <div class='value'>{{ability.system.tiers.three}}</div>
                            </div>
                        {{/if}}
                    </div>

                {{/if}}
            {{/each}}
        {{/with}}
    {{/if}}
{{/each}}